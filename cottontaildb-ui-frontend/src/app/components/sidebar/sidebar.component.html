<div class="content">

    <mat-toolbar>
      <button mat-icon-button (click)="connect()">
        <mat-icon>add_circle</mat-icon>
      </button>
    </mat-toolbar>

    <!-- Connection tree structure. -->
    <mat-tree [dataSource]="dataSource" [treeControl]="treeControl" class="tree">

      <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>
        {{node.name}}
      </mat-tree-node>

      <!-- Handle connection tree nodes -->
      <mat-tree-node *matTreeNodeDef="let node; when: isConnection">
        <div class="mat-tree-node">
          <button mat-icon-button [attr.aria-label]="'Toggle ' + node.name" matTreeNodeToggle>
            <mat-icon class="mat-icon-rtl-mirror">
              {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
            </mat-icon>
          </button>

          <mat-icon>power</mat-icon>
          <strong>{{node.name}}</strong>

          <button mat-icon-button [matMenuTriggerFor]="connectionActionMenu" aria-label="Action menu for connection.">
            <mat-icon>more_vert</mat-icon>
          </button>

          <mat-spinner *ngIf="node.isLoading" mode="indeterminate" [diameter]="20"></mat-spinner>

          <mat-menu #connectionActionMenu="matMenu">
            <button mat-menu-item (click)="createSchema(node)">
              <span>Create Schema</span>
            </button>
            <button mat-menu-item (click)="disconnect(node)">
              <span>Disconnect</span>
            </button>
          </mat-menu>
        </div>
      </mat-tree-node>

      <!-- Handle schema tree nodes -->
      <mat-tree-node *matTreeNodeDef="let node; when: isSchema" matTreeNodePadding>
        <div>
          <button mat-icon-button [attr.aria-label]="'Toggle ' + node.name" matTreeNodeToggle >
            <mat-icon class="mat-icon-rtl-mirror">
              {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
            </mat-icon>
          </button>

          <strong>{{node.name}}</strong>

          <button mat-icon-button [matMenuTriggerFor]="schemaActionMenu" aria-label="Action menu for schema.">
            <mat-icon>more_vert</mat-icon>
          </button>

          <mat-menu #schemaActionMenu="matMenu">
            <button mat-menu-item>
              <span>Create Entity</span>
            </button>
            <button mat-menu-item (click)="dropSchema(node)">
              <span>Drop Schema</span>
            </button>
          </mat-menu>
        </div>
      </mat-tree-node>

      <!-- Handle schema tree nodes -->
      <mat-tree-node *matTreeNodeDef="let node; when: isEntity" matTreeNodePadding>
        <div>
          <button mat-icon-button [attr.aria-label]="'Toggle ' + node.name" matTreeNodeToggle >
            <mat-icon class="mat-icon-rtl-mirror">
              {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
            </mat-icon>
          </button>

          <strong>{{node.name}}</strong>

          <button mat-icon-button [matMenuTriggerFor]="schemaActionMenu" aria-label="Action menu for schema.">
            <mat-icon>more_vert</mat-icon>
          </button>

          <mat-menu #schemaActionMenu="matMenu">
            <button mat-menu-item>
              <span>Create Entity</span>
            </button>
            <button mat-menu-item (click)="dropSchema(node)">
              <span>Drop Schema</span>
            </button>
          </mat-menu>
        </div>
      </mat-tree-node>

    </mat-tree>
</div>
